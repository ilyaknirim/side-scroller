export function runDemo(container,level={}){const canvas=document.createElement('canvas');canvas.width=320;canvas.height=240;container.appendChild(canvas);const ctx=canvas.getContext('2d');let paddle={x:120,y:canvas.height-20,w:80,h:10,sx:0};let ball={x:160,y:100,r:6,vx:3,vy:-3};let running=true;const rows=4+(level.difficulty||1);const cols=6;const bricks=[];for(let r=0;r<rows;r++){for(let c=0;c<cols;c++){bricks.push({x:c*(canvas.width/cols)+8,y:20+r*16,w:(canvas.width/cols)-12,h:10,alive:true});}}function update(){paddle.x+=paddle.sx;if(paddle.x<0)paddle.x=0;if(paddle.x+paddle.w>canvas.width)paddle.x=canvas.width-paddle.w;ball.x+=ball.vx;ball.y+=ball.vy;if(ball.x<ball.r || ball.x>canvas.width-ball.r)ball.vx*=-1;if(ball.y<ball.r)ball.vy*=-1;if(ball.y>paddle.y-ball.r && ball.x>paddle.x && ball.x<paddle.x+paddle.w){ball.vy*=-1;ball.y=paddle.y-ball.r-1;}for(const b of bricks){if(b.alive){if(ball.x>b.x && ball.x<b.x+b.w && ball.y>b.y && ball.y<b.y+b.h){b.alive=false;ball.vy*=-1;}}}}function draw(){ctx.fillStyle='#071229';ctx.fillRect(0,0,canvas.width,canvas.height);ctx.fillStyle='#aaa';ctx.fillRect(paddle.x,paddle.y,paddle.w,paddle.h);ctx.fillStyle='#fc3';ctx.beginPath();ctx.arc(ball.x,ball.y,ball.r,0,Math.PI*2);ctx.fill();for(const b of bricks){if(b.alive){ctx.fillStyle='#6cf';ctx.fillRect(b.x,b.y,b.w,b.h);}}}function loop(){if(!running)return;update();draw();requestAnimationFrame(loop);}function onKey(e){const k=e.key || e.code;if(k.includes('ArrowLeft')|| k==='a')paddle.sx=-6;if(k.includes('ArrowRight')|| k==='d')paddle.sx=6;if(e.type==='keyup')paddle.sx=0;}window.addEventListener('keydown',onKey);window.addEventListener('keyup',onKey);canvas.addEventListener('pointerdown',(e)=>{const rect=canvas.getBoundingClientRect();paddle.x=e.clientX-rect.left-paddle.w/2;});loop();return{stop(){running=false;window.removeEventListener('keydown',onKey);window.removeEventListener('keyup',onKey);if(container.contains(canvas))container.removeChild(canvas);}};}